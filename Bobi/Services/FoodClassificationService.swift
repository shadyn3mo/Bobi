import Foundation

class FoodClassificationService {
    static let shared = FoodClassificationService()
    
    private init() {}
    
    
    // æ¶²ä½“é£Ÿç‰©å…³é”®è¯
    let liquidFoods: Set<String> = [
        // ä¸­æ–‡æ¶²ä½“ - ä¹³åˆ¶å“
        "ç‰›å¥¶", "é…¸å¥¶", "è±†å¥¶", "æ¤°å¥¶", "æä»å¥¶", "ç‡•éº¦å¥¶", "ç¾Šå¥¶", "å¥¶æ˜”", "é…ªä¹³", "é²œå¥¶", "çº¯å¥¶",
        "å¥¶æ²¹", "æ·¡å¥¶æ²¹", "ç¨€å¥¶æ²¹", "ç‚¼ä¹³", "ç”œç‚¼ä¹³",
        // ä¸­æ–‡æ¶²ä½“ - æœæ±é¥®æ–™
        "æœæ±", "æ©™æ±", "è‹¹æœæ±", "è‘¡è„æ±", "è¥¿ç“œæ±", "æŸ æª¬æ±", "è”¬èœæ±", "èƒ¡èåœæ±", "è¥¿çº¢æŸ¿æ±",
        "æ±½æ°´", "å¯ä¹", "é›ªç¢§", "èŠ¬è¾¾", "è‹æ‰“æ°´", "æ°”æ³¡æ°´", "æŸ æª¬æ±½æ°´", "è¿åŠ¨é¥®æ–™", "åŠŸèƒ½é¥®æ–™",
        // ä¸­æ–‡æ¶²ä½“ - èŒ¶ç±»å’–å•¡
        "èŒ¶", "ç»¿èŒ¶", "çº¢èŒ¶", "ä¹Œé¾™èŒ¶", "æ™®æ´±èŒ¶", "èŠ±èŒ¶", "æŸ æª¬èŒ¶", "å¥¶èŒ¶", "èœ‚èœœèŒ¶", "å†°èŒ¶",
        "å’–å•¡", "ç¾å¼å’–å•¡", "æ‹¿é“", "å¡å¸ƒå¥‡è¯º", "æ‘©å¡", "æµ“ç¼©å’–å•¡", "å†°å’–å•¡", "é€Ÿæº¶å’–å•¡",
        // ä¸­æ–‡æ¶²ä½“ - é…’ç±»
        "é…’", "å•¤é…’", "çº¢é…’", "ç™½é…’", "é»„é…’", "ç±³é…’", "æ–™é…’", "ç™½å…°åœ°", "å¨å£«å¿Œ", "ä¼ç‰¹åŠ ", "æœ—å§†é…’",
        // ä¸­æ–‡æ¶²ä½“ - è°ƒæ–™æ²¹ç±»
        "é†‹", "ç±³é†‹", "ç™½é†‹", "é¦™é†‹", "é™ˆé†‹", "è‹¹æœé†‹", "é…±æ²¹", "ç”ŸæŠ½", "è€æŠ½", "èšæ²¹", "é±¼éœ²",
        "èŠéº»æ²¹", "é¦™æ²¹", "æ©„æ¦„æ²¹", "èœç±½æ²¹", "èŠ±ç”Ÿæ²¹", "ç‰ç±³æ²¹", "è‘µèŠ±ç±½æ²¹", "æ¤°å­æ²¹",
        // ä¸­æ–‡æ¶²ä½“ - æ±¤ç±»
        "æ±¤", "é«˜æ±¤", "é¸¡æ±¤", "éª¨å¤´æ±¤", "è”¬èœæ±¤", "å‘³å™Œæ±¤", "ç´«èœè›‹èŠ±æ±¤",
        // ä¸­æ–‡æ¶²ä½“ - å…¶ä»–
        "æ°´", "çŸ¿æ³‰æ°´", "çº¯å‡€æ°´", "å¼€æ°´", "å‡‰æ°´", "èœ‚èœœ", "ç³–æµ†", "æ«ç³–æµ†", "æ¤°æµ†",
        
        // è‹±æ–‡æ¶²ä½“
        "milk", "yogurt", "juice", "coffee", "tea", "water", "soda", "beer", "wine", "alcohol",
        "oil", "vinegar", "sauce", "syrup", "honey", "cream", "beverage", "drink", "smoothie",
        "latte", "cappuccino", "espresso", "cocktail", "whiskey", "vodka", "rum", "brandy",
        "soup", "broth", "stock", "coconut milk", "almond milk", "soy milk", "oat milk"
    ]
    
    // é£Ÿç‰©åˆ†ç±»å…³é”®è¯æ˜ å°„
    let categoryKeywords: [FoodCategory: Set<String>] = [
        .dairy: [
            // ä¸­æ–‡ä¹³åˆ¶å“
            "ç‰›å¥¶", "é…¸å¥¶", "è±†å¥¶", "æ¤°å¥¶", "æä»å¥¶", "ç‡•éº¦å¥¶", "ç¾Šå¥¶", "å¥¶æ˜”", "é…ªä¹³", "é²œå¥¶", "çº¯å¥¶",
            "å¥¶æ²¹", "æ·¡å¥¶æ²¹", "ç¨€å¥¶æ²¹", "ç‚¼ä¹³", "ç”œç‚¼ä¹³", "å¥¶é…ª", "èŠå£«", "é»„æ²¹", "é…¸å¥¶æ²¹", "é©¬æ–¯å¡å½­",
            // è‹±æ–‡ä¹³åˆ¶å“
            "milk", "yogurt", "cream", "cheese", "butter", "dairy",
            "soy milk", "almond milk", "oat milk", "coconut milk", "cottage cheese",
            "cheddar", "mozzarella", "parmesan", "goat cheese", "feta"
        ],
        .eggs: [
            // ä¸­æ–‡è›‹ç±»
            "é¸¡è›‹", "è›‹", "é¸­è›‹", "é¹Œé¹‘è›‹", "è›‹ç™½", "è›‹é»„", "å’¸é¸­è›‹", "æ¾èŠ±è›‹", "çš®è›‹", "èŒ¶å¶è›‹",
            // è‹±æ–‡è›‹ç±»
            "egg", "eggs", "duck egg", "quail egg", "chicken egg", "egg white", "egg yolk"
        ],
        .meat: [
            // ä¸­æ–‡è‚‰ç±»
            "ç‰›è‚‰", "çŒªè‚‰", "é¸¡è‚‰", "ç¾Šè‚‰", "é¸­è‚‰", "é¹…è‚‰", "å…”è‚‰", "é¹¿è‚‰",
            "ç‰›æ’", "çŒªæ’", "ç¾Šæ’", "é¸¡èƒ¸", "é¸¡è…¿", "é¸¡ç¿…", "é¸¡çˆª", "çŒªè¹„",
            "äº”èŠ±è‚‰", "é‡Œè„Š", "æ¢…èŠ±è‚‰", "ç‰›è…©", "ç‰›è…±", "æ’éª¨", "è„Šéª¨", "æ£’éª¨",
            "è‚", "å¿ƒ", "è‚º", "è‚¾", "è‚š", "è‚ ", "èˆŒ", "è„‘", "è…°å­",
            "è‚‰", "ç»è‚‰", "è‚‰é¦…", "è‚‰ä¸¸", "è‚‰é¥¼", "é¦™è‚ ", "è…Šè‚ ", "ç«è…¿", "åŸ¹æ ¹",
            // è‹±æ–‡è‚‰ç±»
            "beef", "pork", "chicken", "lamb", "duck", "turkey", "goose", "rabbit",
            "steak", "ribs", "chops", "breast", "thigh", "wing", "leg", "shoulder",
            "ground beef", "ground pork", "minced meat", "meatball", "sausage",
            "bacon", "ham", "deli meat", "jerky", "dried meat", "cured meat", "meat"
        ],
        .seafood: [
            // ä¸­æ–‡æ°´äº§
            "é±¼", "é±¼è‚‰", "ä¸‰æ–‡é±¼", "é‡‘æªé±¼", "é²ˆé±¼", "å¸¦é±¼", "é»„é±¼", "é²¤é±¼",
            "è‰é±¼", "é²«é±¼", "é³•é±¼", "ç§‹åˆ€é±¼", "é²³é±¼", "çŸ³æ–‘é±¼", "é³—é±¼", "ç½—éé±¼",
            "è™¾", "è™¾ä»", "åŸºå›´è™¾", "ç™½è™¾", "é’è™¾", "æ²³è™¾", "æµ·è™¾", "å¯¹è™¾", "é¾™è™¾",
            "èŸ¹", "èƒèŸ¹", "å¤§é—¸èŸ¹", "æ¢­å­èŸ¹", "é’èŸ¹", "èŸ¹è‚‰", "èŸ¹é»„", "å¸ç‹èŸ¹",
            "è´ç±»", "æ‰‡è´", "è›¤èœŠ", "ç‰¡è›", "ç”Ÿèš", "é²é±¼", "æµ·å‚", "èŠ±ç”²", "è›å­",
            "é±¿é±¼", "ç« é±¼", "å¢¨é±¼", "ä¹Œè´¼", "å…«çˆªé±¼", "æµ·èœ‡", "æµ·èƒ†", "æµ·é²œ",
            // è‹±æ–‡æ°´äº§
            "fish", "salmon", "tuna", "cod", "bass", "halibut", "mackerel", "sardine",
            "trout", "catfish", "tilapia", "snapper", "grouper", "flounder", "sole",
            "shrimp", "prawns", "crab", "lobster", "crayfish", "langostino",
            "scallop", "oyster", "mussel", "clam", "abalone", "sea cucumber",
            "squid", "octopus", "cuttlefish", "calamari", "seafood", "shellfish"
        ],
        .vegetables: [
            // ä¸­æ–‡è”¬èœ
            "ç™½èœ", "è èœ", "èŠ¹èœ", "éŸ­èœ", "ç”Ÿèœ", "å°ç™½èœ", "é’èœ", "æ²¹èœ",
            "èƒ¡èåœ", "åœŸè±†", "ç•ªèŒ„", "è¥¿çº¢æŸ¿", "é»„ç“œ", "èŒ„å­", "è±†è§’", "å››å­£è±†",
            "é’æ¤’", "çº¢æ¤’", "è¾£æ¤’", "å°–æ¤’", "ç”œæ¤’", "å½©æ¤’", "æ´‹è‘±", "å¤§è‘±", "å°è‘±",
            "å¤§è’œ", "è’œè‹—", "å§œ", "ç”Ÿå§œ", "è¥¿å…°èŠ±", "èŠ±æ¤°èœ", "å·å¿ƒèœ", "åŒ…èœ",
            "å†¬ç“œ", "å—ç“œ", "ä¸ç“œ", "è‹¦ç“œ", "å±±è¯", "èŠ‹å¤´", "çº¢è–¯", "åœ°ç“œ", "ç´«è–¯",
            "è²è—•", "è¸è ", "èŠ¦ç¬‹", "ç«¹ç¬‹", "è±†èŠ½", "è˜‘è‡", "é¦™è‡", "å¹³è‡", "é‡‘é’ˆè‡",
            "æœ¨è€³", "é“¶è€³", "é»‘æœ¨è€³", "ç™½æœ¨è€³",
            // è‹±æ–‡è”¬èœ
            "cabbage", "spinach", "celery", "lettuce", "carrot", "potato", "tomato",
            "cucumber", "eggplant", "pepper", "bell pepper", "onion", "garlic", "ginger",
            "broccoli", "cauliflower", "zucchini", "squash", "pumpkin", "sweet potato",
            "mushroom", "green beans", "asparagus", "artichoke", "beets", "turnip",
            "radish", "leek", "vegetable", "vegetables"
        ],
        .fruits: [
            // ä¸­æ–‡æ°´æœ
            "è‹¹æœ", "é¦™è•‰", "æ©™å­", "æ©˜å­", "æŸ æª¬", "æŸšå­", "è‘¡è„", "è‰è“", "è“è“",
            "æ¨±æ¡ƒ", "æ¡ƒå­", "æå­", "æå­", "æ¢¨", "è¥¿ç“œ", "å“ˆå¯†ç“œ", "é¦™ç“œ", "ç”œç“œ",
            "æœ¨ç“œ", "èŠ’æœ", "è è", "å‡¤æ¢¨", "çŒ•çŒ´æ¡ƒ", "ç«é¾™æœ", "ç™¾é¦™æœ", "ç‰›æ²¹æœ",
            "è”æ", "é¾™çœ¼", "æ¡‚åœ†", "æ¦´è²", "å±±ç«¹", "æ¤°å­", "çŸ³æ¦´", "æŸ¿å­", "æ£",
            // è‹±æ–‡æ°´æœ
            "apple", "banana", "orange", "lemon", "grape", "strawberry", "blueberry",
            "cherry", "peach", "pear", "watermelon", "melon", "mango", "pineapple",
            "kiwi", "avocado", "coconut", "pomegranate", "fig", "dates", "berries",
            "fruit", "fruits"
        ],
        .grains: [
            // ä¸­æ–‡è°·ç‰©
            "å¤§ç±³", "ç™½ç±³", "ç³™ç±³", "é»‘ç±³", "çº¢ç±³", "é¦™ç±³", "å°ç±³", "é»„å°ç±³",
            "é«˜ç²±", "ç‡•éº¦", "éº¦ç‰‡", "ç‰ç±³", "ç‰ç±³ç²’", "ç‰ç±³é¢",
            "é¢ç²‰", "é«˜ç­‹é¢ç²‰", "ä½ç­‹é¢ç²‰", "ä¸­ç­‹é¢ç²‰", "å…¨éº¦é¢ç²‰",
            "å°éº¦", "å¤§éº¦", "èéº¦", "è—œéº¦", "è–ç±³", "è–ä»", "ç³¯ç±³", "æ±Ÿç±³",
            "ç»¿è±†", "çº¢è±†", "é»‘è±†", "é»„è±†", "å¤§è±†", "è±Œè±†", "èš•è±†", "æ‰è±†",
            "é¢åŒ…", "åå¸", "é¦’å¤´", "åŒ…å­", "é¥ºå­", "é¢æ¡", "æ„é¢", "é€šå¿ƒç²‰",
            "ç±³é¥­", "ç²¥", "ç¨€é¥­", "å…«å®ç²¥", "å°ç±³ç²¥",
            // è‹±æ–‡è°·ç‰©
            "rice", "flour", "wheat", "oats", "corn", "quinoa", "barley", "beans",
            "lentils", "chickpeas", "bread", "toast", "noodles", "pasta", "cereal",
            "grains", "oatmeal", "porridge", "brown rice", "white rice", "whole wheat"
        ],
        .beverages: [
            // ä¸­æ–‡é¥®æ–™
            "æœæ±", "æ©™æ±", "è‹¹æœæ±", "è‘¡è„æ±", "è¥¿ç“œæ±", "æŸ æª¬æ±", "è”¬èœæ±",
            "æ±½æ°´", "å¯ä¹", "é›ªç¢§", "èŠ¬è¾¾", "è‹æ‰“æ°´", "æ°”æ³¡æ°´", "è¿åŠ¨é¥®æ–™",
            "èŒ¶", "ç»¿èŒ¶", "çº¢èŒ¶", "ä¹Œé¾™èŒ¶", "æ™®æ´±èŒ¶", "èŠ±èŒ¶", "æŸ æª¬èŒ¶", "å¥¶èŒ¶",
            "å’–å•¡", "ç¾å¼å’–å•¡", "æ‹¿é“", "å¡å¸ƒå¥‡è¯º", "æ‘©å¡", "æµ“ç¼©å’–å•¡", "å†°å’–å•¡",
            "é…’", "å•¤é…’", "çº¢é…’", "ç™½é…’", "é»„é…’", "ç±³é…’", "ç™½å…°åœ°", "å¨å£«å¿Œ",
            "æ±¤", "é«˜æ±¤", "é¸¡æ±¤", "éª¨å¤´æ±¤", "è”¬èœæ±¤", "å‘³å™Œæ±¤",
            "æ°´", "çŸ¿æ³‰æ°´", "çº¯å‡€æ°´", "å¼€æ°´", "å‡‰æ°´",
            // è‹±æ–‡é¥®æ–™
            "juice", "coffee", "tea", "water", "soda", "beer", "wine", "alcohol",
            "beverage", "drink", "smoothie", "latte", "cappuccino", "espresso",
            "cocktail", "whiskey", "vodka", "rum", "brandy", "soup", "broth", "stock"
        ],
        .condiments: [
            // ä¸­æ–‡è°ƒæ–™
            "é†‹", "ç±³é†‹", "ç™½é†‹", "é¦™é†‹", "é™ˆé†‹", "è‹¹æœé†‹", "é…±æ²¹", "ç”ŸæŠ½", "è€æŠ½",
            "èšæ²¹", "é±¼éœ²", "èŠéº»æ²¹", "é¦™æ²¹", "æ©„æ¦„æ²¹", "èœç±½æ²¹", "èŠ±ç”Ÿæ²¹",
            "ç‰ç±³æ²¹", "è‘µèŠ±ç±½æ²¹", "æ¤°å­æ²¹", "ç›", "ç²—ç›", "ç»†ç›", "æµ·ç›", "å²©ç›",
            "ç³–", "ç™½ç³–", "çº¢ç³–", "å†°ç³–", "ç»µç™½ç³–", "èƒ¡æ¤’", "é»‘èƒ¡æ¤’", "ç™½èƒ¡æ¤’",
            "èŠ±æ¤’", "éº»æ¤’", "é’èŠ±æ¤’", "çº¢èŠ±æ¤’", "å…«è§’", "å¤§æ–™", "æ¡‚çš®", "é¦™å¶",
            "ä¸é¦™", "å°èŒ´é¦™", "å­œç„¶", "è¾£æ¤’ç²‰", "èƒ¡æ¤’ç²‰", "å’–å–±ç²‰", "äº”é¦™ç²‰",
            "åä¸‰é¦™", "é¸¡ç²¾", "å‘³ç²¾", "æ·€ç²‰", "ç”Ÿç²‰", "ç‰ç±³æ·€ç²‰", "èœ‚èœœ", "ç³–æµ†",
            // è‹±æ–‡è°ƒæ–™
            "salt", "sugar", "pepper", "spices", "herbs", "seasoning", "oil", "vinegar",
            "sauce", "syrup", "honey", "cinnamon", "cumin", "paprika", "turmeric",
            "oregano", "basil", "thyme", "soy sauce", "olive oil", "sesame oil",
            "garlic powder", "onion powder", "chili powder", "curry powder"
        ],
        .frozen: [
            // ä¸­æ–‡å†·å†»é£Ÿå“
            "å†·å†»", "é€Ÿå†»", "å†°å†»", "å†°æ¿€å‡Œ", "å†°æ·‡æ·‹", "é›ªç³•", "å†°æ£’", "å†°å—",
            "å†»è‚‰", "å†»é±¼", "å†»è™¾", "å†»é¥ºå­", "å†»åŒ…å­", "å†»é¦„é¥¨", "å†·å†»è”¬èœ",
            "å†·å†»æ°´æœ", "å†·å†»é¢æ¡", "å†·å†»ç±³é¥­", "å†·å†»pizza", "å†·å†»æ±¤åœ†",
            // è‹±æ–‡å†·å†»é£Ÿå“
            "frozen", "ice cream", "frozen meat", "frozen fish", "frozen vegetables",
            "frozen fruit", "frozen pizza", "frozen dinner", "ice", "popsicle"
        ],
        .canned: [
            // ä¸­æ–‡ç½å¤´
            "ç½å¤´", "ç½è£…", "å¬è£…", "ç“¶è£…", "ç›’è£…", "è¢‹è£…",
            "ç½å¤´é±¼", "é‡‘æªé±¼ç½å¤´", "æ²™ä¸é±¼ç½å¤´", "åˆé¤è‚‰", "ç½å¤´æ°´æœ",
            "ç½å¤´è”¬èœ", "ç•ªèŒ„ç½å¤´", "ç‰ç±³ç½å¤´", "è±Œè±†ç½å¤´",
            // è‹±æ–‡ç½å¤´
            "canned", "tinned", "jarred", "packaged", "preserved", "canned fish",
            "canned fruit", "canned vegetables", "canned tomatoes", "canned corn",
            "lunch meat", "spam", "sardines", "tuna can"
        ],
        .snacks: [
            // ä¸­æ–‡é›¶é£Ÿ
            "è–¯ç‰‡", "é¥¼å¹²", "å·§å…‹åŠ›", "ç³–æœ", "è›‹ç³•", "ç”œç”œåœˆ", "çˆ†ç±³èŠ±",
            "åšæœ", "èŠ±ç”Ÿ", "æ ¸æ¡ƒ", "æä»", "è…°æœ", "å¼€å¿ƒæœ", "æ¦›å­", "æ¾å­",
            "ç“œå­", "è‘µèŠ±ç±½", "å—ç“œå­", "è¥¿ç“œå­", "èŠéº»", "é»‘èŠéº»", "ç™½èŠéº»",
            "é¥¼å¹²", "å¨åŒ–", "æ›²å¥‡", "æ¶ˆåŒ–é¥¼", "è‹æ‰“é¥¼", "æ¢³æ‰“é¥¼",
            "ç³–", "è½¯ç³–", "ç¡¬ç³–", "æ£’æ£’ç³–", "å£é¦™ç³–", "æ³¡æ³¡ç³–",
            // è‹±æ–‡é›¶é£Ÿ
            "chips", "cookies", "chocolate", "candy", "cake", "popcorn", "nuts",
            "almonds", "walnuts", "peanuts", "cashews", "pistachios", "seeds",
            "crackers", "biscuits", "gum", "snacks", "treats", "sweets"
        ],
        .other: [
            // å…¶ä»–æœªåˆ†ç±»çš„é£Ÿå“
            "å…¶ä»–", "æ‚é¡¹", "æœªåˆ†ç±»", "other", "miscellaneous", "unclassified"
        ]
    ]
    
    // åˆ¤æ–­é£Ÿç‰©åˆ†ç±»
    func classifyFood(_ name: String) -> FoodCategory {
        let lowercaseName = name.lowercased()
        
        // éå†æ‰€æœ‰åˆ†ç±»ï¼ŒæŸ¥æ‰¾åŒ¹é…çš„å…³é”®è¯
        for (category, keywords) in categoryKeywords {
            for keyword in keywords {
                if lowercaseName.contains(keyword.lowercased()) {
                    return category
                }
            }
        }
        
        // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•åˆ†ç±»ï¼Œè¿”å›é»˜è®¤åˆ†ç±»
        return .other
    }
    
    // æ£€æŸ¥æ˜¯å¦ä¸ºæ¶²ä½“é£Ÿç‰©
    func isLiquidFood(_ name: String) -> Bool {
        let lowercaseName = name.lowercased()
        return liquidFoods.contains { liquid in
            lowercaseName.contains(liquid.lowercased())
        }
    }
    
    // æ£€æŸ¥æ˜¯å¦ä¸ºå®¹å™¨å•ä½
    func isContainerUnit(_ unit: String) -> Bool {
        let containerUnits: Set<String> = [
            // ä¸­æ–‡å®¹å™¨å•ä½
            "ç“¶", "ç½", "ç›’", "è¢‹", "å¤§ç“¶", "å°ç“¶", "å¬", "æ¡¶", "ç¼¸", "å›", "å£¶", "æ¯", "ç¢—",
            "å¡‘æ–™ç“¶", "ç»ç’ƒç“¶", "é“ç½", "çº¸ç›’", "å¡‘æ–™è¢‹", "çº¸è¢‹", "ä¿é²œç›’", "å¯†å°ç›’",
            // è‹±æ–‡å®¹å™¨å•ä½
            "bottle", "bottles", "can", "cans", "box", "boxes", "jar", "jars",
            "package", "packages", "pack", "packs", "bag", "bags", "container", "containers",
            "carton", "cartons", "tube", "tubes", "pouch", "pouches", "tin", "tins"
        ]
        
        return containerUnits.contains(unit.lowercased())
    }
    
    // éœ€è¦é‡é‡å•ä½çš„é£Ÿç‰© - é‡æ–°åˆ†æåçš„ç²¾å‡†åˆ—è¡¨
    let weightRequiredFoods: Set<String> = [
        // è‚‰ç±» - å…¨éƒ¨éœ€è¦é‡é‡å•ä½
        // ä¸­æ–‡è‚‰ç±»
        "ç‰›è‚‰", "çŒªè‚‰", "é¸¡è‚‰", "ç¾Šè‚‰", "é¸­è‚‰", "é¹…è‚‰", "å…”è‚‰", "é¹¿è‚‰",
        "ç‰›æ’", "çŒªæ’", "ç¾Šæ’", "é¸¡èƒ¸", "äº”èŠ±è‚‰", "é‡Œè„Š", "æ¢…èŠ±è‚‰", "ç‰›è…©", "ç‰›è…±",
        "æ’éª¨", "è„Šéª¨", "æ£’éª¨", "ç­’éª¨", "è‚‹éª¨",
        "è‚", "å¿ƒ", "è‚º", "è‚¾", "è‚š", "è‚ ", "èˆŒ", "è…°å­", "çŒªè‚", "é¸¡è‚", "ç‰›è‚",
        "è‚‰", "ç»è‚‰", "è‚‰é¦…", "è‚‰é¥¼", "è‚‰æ¾", "è‚‰å¹²", "è…Šè‚‰", "å’¸è‚‰",
        "é¦™è‚ ", "è…Šè‚ ", "ç«è…¿", "åŸ¹æ ¹", "åˆé¤è‚‰",
        // è‹±æ–‡è‚‰ç±»
        "beef", "pork", "chicken", "lamb", "duck", "turkey", "goose", "rabbit", "venison",
        "steak", "ribs", "chops", "breast", "thigh", "shoulder", "loin",
        "ground beef", "ground pork", "minced meat", "sausage",
        "bacon", "ham", "deli meat", "jerky", "dried meat", "cured meat", "meat",
        
        // æµ·é²œç±» - å…¨éƒ¨éœ€è¦é‡é‡å•ä½
        // ä¸­æ–‡æµ·é²œ
        "é±¼", "é±¼è‚‰", "é±¼ç‰‡", "é±¼æ’", "é±¼å—", "é±¼å¤´", "é±¼å°¾",
        "ä¸‰æ–‡é±¼", "é‡‘æªé±¼", "é²ˆé±¼", "å¸¦é±¼", "é»„é±¼", "é²¤é±¼", "è‰é±¼", "é²«é±¼", "é³•é±¼", "çŸ³æ–‘é±¼",
        "æ¯”ç›®é±¼", "é²³é±¼", "é²…é±¼", "ç§‹åˆ€é±¼", "æ²™ä¸é±¼", "é³—é±¼", "é³é±¼", "æ³¥é³…", "é»„é³",
        "è™¾", "è™¾ä»", "è™¾ç±³", "è™¾å¹²", "åŸºå›´è™¾", "ç™½è™¾", "é’è™¾", "æ²³è™¾", "æµ·è™¾", "å¯¹è™¾",
        "èŸ¹è‚‰", "èŸ¹é»„", "èŸ¹è†", "è´ç±»", "æ‰‡è´", "è›¤èœŠ", "ç‰¡è›", "ç”Ÿèš", "é²é±¼", "æµ·å‚",
        "é±¿é±¼", "ç« é±¼", "å¢¨é±¼", "ä¹Œè´¼", "å…«çˆªé±¼", "é±¿é±¼ä¸", "é±¿é±¼å¹²",
        "æµ·å¸¦", "ç´«èœ", "è£™å¸¦èœ", "æµ·è‹”", "æµ·ç™½èœ", "æµ·èœ‡", "æµ·èœ‡çš®",
        // è‹±æ–‡æµ·é²œ
        "fish", "salmon", "tuna", "cod", "bass", "halibut", "mackerel", "sardine", "anchovy",
        "shrimp", "prawns", "crab meat", "scallop", "oyster", "mussel", "clam",
        "squid", "octopus", "seafood", "shellfish", "fish fillet", "fish steak",
        
        // ç»¿å¶è”¬èœ - é€šå¸¸æŒ‰é‡é‡è´­ä¹°
        // ä¸­æ–‡ç»¿å¶èœ
        "ç™½èœ", "è èœ", "èŠ¹èœ", "éŸ­èœ", "ç”Ÿèœ", "å°ç™½èœ", "é’èœ", "æ²¹èœ", "ç©ºå¿ƒèœ", "èŒ¼è’¿",
        "é¦™èœ", "èŠ«è½", "éŸ­é»„", "è’œè‹—", "è’œé»„", "è±†è‹—", "èŠ±ç”ŸèŠ½", "è±†èŠ½", "ç»¿è±†èŠ½", "é»„è±†èŠ½",
        // è‹±æ–‡ç»¿å¶èœ
        "spinach", "lettuce", "celery", "bok choy", "kale", "arugula", "watercress",
        "cilantro", "parsley", "basil", "mint", "cabbage", "chinese cabbage",
        
        // æ ¹èŒç±»è”¬èœ - é€šå¸¸æŒ‰é‡é‡è´­ä¹°
        // ä¸­æ–‡æ ¹èŒèœ
        "èƒ¡èåœ", "åœŸè±†", "çº¢è–¯", "åœ°ç“œ", "ç´«è–¯", "é©¬é“ƒè–¯", "æ´‹èŠ‹",
        "èåœ", "ç™½èåœ", "é’èåœ", "å±±è¯", "èŠ‹å¤´", "è²è—•", "è¸è ", "æ…ˆå§‘",
        "æ´‹è‘±", "å¤§è’œ", "å§œ", "ç”Ÿå§œ", "è€å§œ", "å«©å§œ",
        // è‹±æ–‡æ ¹èŒèœ
        "carrot", "potato", "sweet potato", "onion", "garlic", "ginger",
        "radish", "turnip", "beets", "yam", "lotus root",
        
        // éœ€è¦æŒ‰é‡é‡çš„å…¶ä»–è”¬èœ
        // ä¸­æ–‡
        "å†¬ç“œ", "å—ç“œ", "ä¸ç“œ", "è‹¦ç“œ", "ä½›æ‰‹ç“œ", "è›‡ç“œ",
        "è¥¿å…°èŠ±", "èŠ±æ¤°èœ", "å·å¿ƒèœ", "åŒ…èœ", "ç´«ç”˜è“",
        "èŠ¦ç¬‹", "ç«¹ç¬‹", "å†¬ç¬‹", "æ˜¥ç¬‹", "æ¯›ç¬‹",
        "è˜‘è‡", "é¦™è‡", "å¹³è‡", "é‡‘é’ˆè‡", "æé²è‡", "èŒ¶æ ‘è‡", "è‰è‡", "å£è˜‘", "çŒ´å¤´è‡",
        // è‹±æ–‡
        "broccoli", "cauliflower", "zucchini", "squash", "pumpkin",
        "asparagus", "mushroom", "green beans", "artichoke", "leek",
        
        // éœ€è¦æŒ‰é‡é‡çš„æ°´æœ (é€šå¸¸å¤§å‹æˆ–æ‰¹é‡é”€å”®çš„)
        // ä¸­æ–‡
        "è¥¿ç“œ", "å“ˆå¯†ç“œ", "é¦™ç“œ", "ç”œç“œ", "è‘¡è„", "è‰è“", "è“è“", "é»‘è“",
        "æ¨±æ¡ƒ", "è”æ", "é¾™çœ¼", "æ¡‚åœ†", "æ¦´è²", "å±±ç«¹", "çº¢æ¯›ä¸¹",
        "è‘¡è„å¹²", "æå­", "æ¸æ", "è²å­", "çº¢æ£", "é»‘æ£", "èœœæ£", "å¤§æ£", "å°æ£",
        // è‹±æ–‡  
        "watermelon", "grapes", "strawberries", "blueberries", "cherries",
        "berries", "raisins", "dates", "dried fruits",
        
        // ä¸»é£Ÿè°·ç‰©ç±» - æ•£è£…éœ€è¦é‡é‡
        // ä¸­æ–‡è°·ç‰©
        "å¤§ç±³", "ç™½ç±³", "ç³™ç±³", "é»‘ç±³", "çº¢ç±³", "é¦™ç±³", "æ³°å›½é¦™ç±³", "äº”å¸¸å¤§ç±³", "ä¸œåŒ—å¤§ç±³",
        "å°ç±³", "é»„å°ç±³", "ç²Ÿç±³", "é«˜ç²±", "ç‡•éº¦", "éº¦ç‰‡", "ç‰ç±³ç²’", "ç‰ç±³é¢",
        "é¢ç²‰", "é«˜ç­‹é¢ç²‰", "ä½ç­‹é¢ç²‰", "ä¸­ç­‹é¢ç²‰", "å…¨éº¦é¢ç²‰", "ç‰ç±³é¢ç²‰", "èéº¦é¢ç²‰",
        "å°éº¦", "å¤§éº¦", "èéº¦", "è—œéº¦", "è–ç±³", "è–ä»", "ç³¯ç±³", "æ±Ÿç±³",
        "ç»¿è±†", "çº¢è±†", "é»‘è±†", "é»„è±†", "å¤§è±†", "è±Œè±†", "èš•è±†", "æ‰è±†", "èŠ¸è±†", "åˆ€è±†",
        "èŠ±ç”Ÿ", "èŠ±ç”Ÿç±³", "æ ¸æ¡ƒ", "æ ¸æ¡ƒä»", "æä»", "è…°æœ", "å¼€å¿ƒæœ", "æ¦›å­", "æ¾å­",
        "ç“œå­", "è‘µèŠ±ç±½", "å—ç“œå­", "è¥¿ç“œå­", "èŠéº»", "é»‘èŠéº»", "ç™½èŠéº»",
        // è‹±æ–‡è°·ç‰©
        "rice", "flour", "wheat", "oats", "corn kernels", "quinoa", "barley", "beans", "lentils",
        "chickpeas", "nuts", "almonds", "walnuts", "peanuts", "cashews", "pistachios",
        "seeds", "sesame", "sunflower seeds", "grains", "cereals",
        
        // è°ƒæ–™é¦™æ–™ç±» - æ•£è£…éœ€è¦é‡é‡
        // ä¸­æ–‡è°ƒæ–™
        "ç›", "ç²—ç›", "ç»†ç›", "æµ·ç›", "å²©ç›", "ç³–", "ç™½ç³–", "çº¢ç³–", "å†°ç³–", "ç»µç™½ç³–",
        "èƒ¡æ¤’", "é»‘èƒ¡æ¤’", "ç™½èƒ¡æ¤’", "èƒ¡æ¤’ç²‰", "èŠ±æ¤’", "éº»æ¤’", "é’èŠ±æ¤’", "çº¢èŠ±æ¤’",
        "å…«è§’", "å¤§æ–™", "æ¡‚çš®", "é¦™å¶", "æœˆæ¡‚å¶", "ä¸é¦™", "å°èŒ´é¦™", "å­œç„¶", "å­œç„¶ç²‰",
        "è¾£æ¤’ç²‰", "èƒ¡æ¤’ç²‰", "å’–å–±ç²‰", "äº”é¦™ç²‰", "åä¸‰é¦™", "é¸¡ç²¾", "å‘³ç²¾", "æ·€ç²‰",
        "ç”Ÿç²‰", "ç‰ç±³æ·€ç²‰", "åœŸè±†æ·€ç²‰", "çº¢è–¯æ·€ç²‰", "ç»¿è±†æ·€ç²‰", "ç³¯ç±³ç²‰",
        "èŒ¶å¶", "ç»¿èŒ¶", "çº¢èŒ¶", "ä¹Œé¾™èŒ¶", "æ™®æ´±èŒ¶", "é“è§‚éŸ³", "é¾™äº•", "ç¢§èºæ˜¥",
        "å’–å•¡è±†", "å’–å•¡ç²‰", "å¯å¯ç²‰", "å¥¶ç²‰", "è±†ç²‰", "èŠéº»ç²‰", "èŠ±ç”Ÿç²‰",
        // è‹±æ–‡è°ƒæ–™
        "salt", "sugar", "flour", "starch", "pepper", "spices", "herbs", "seasoning",
        "cinnamon", "cumin", "paprika", "turmeric", "oregano", "basil", "thyme",
        "tea leaves", "coffee beans", "cocoa powder", "milk powder",
        
        // å¹²è´§ç±» - å…¨éƒ¨éœ€è¦é‡é‡
        // ä¸­æ–‡å¹²è´§
        "æœ¨è€³", "é“¶è€³", "é»‘æœ¨è€³", "ç™½æœ¨è€³", "å¹²æœ¨è€³", "å¹²é“¶è€³",
        "å¹²é¦™è‡", "èŠ±è‡", "å†¬è‡", "èŒ¶æ ‘è‡", "é‡‘é’ˆè‡å¹²", "æé²è‡å¹²",
        "å¹²æµ·å¸¦", "æµ·å¸¦ä¸", "å¹²ç´«èœ", "è£™å¸¦èœ", "æµ·è‹”", "æµ·ç™½èœ",
        "ç²‰ä¸", "ç²‰æ¡", "çº¢è–¯ç²‰", "åœŸè±†ç²‰", "ç»¿è±†ç²‰ä¸", "é¾™å£ç²‰ä¸", "å®½ç²‰",
        "è…ç«¹", "æ²¹è±†çš®", "è±†è…çš®", "ç™¾å¶", "åƒå¼ ", "è±†è…å¹²", "é¦™å¹²", "ç™½å¹²",
        "ç™¾åˆ", "ç‡•çª", "é±¼èƒ¶", "èŠ±èƒ¶", "é²é±¼å¹²", "ç‘¶æŸ±", "å¹²è´",
        // è‹±æ–‡å¹²è´§
        "dried mushrooms", "seaweed", "dried seaweed", "bean thread", "tofu skin",
        "dried beans", "dried vegetables", "dried seafood"
    ]
    
    // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡é‡å•ä½
    func needsWeightUnit(_ name: String) -> Bool {
        let lowercaseName = name.lowercased()
        return weightRequiredFoods.contains { food in
            lowercaseName.contains(food.lowercased())
        }
    }
    
    // ç‰¹å®šé£Ÿç‰©çš„ä¿è´¨æœŸï¼ˆå¤©æ•°ï¼‰
    let specificFoodShelfLife: [String: Int] = [
        // çƒ­å¸¦æ°´æœï¼ˆå¸¸æ¸©å‚¨å­˜ï¼‰
        "è è": 5, "å‡¤æ¢¨": 5, "pineapple": 5,
        "èŠ’æœ": 3, "mango": 3, "mangoes": 3,
        "ç«é¾™æœ": 3, "æ¦´è²": 2, "æ¤°å­": 7, "coconut": 7,
        "ç‰›æ²¹æœ": 3, "avocado": 3, "avocados": 3,
        "çŒ•çŒ´æ¡ƒ": 7, "kiwi": 7,
        "è¥¿ç“œ": 7, "watermelon": 7,
        
        // æ¸©å¸¦æ°´æœï¼ˆå†·è—å‚¨å­˜ï¼‰
        "è‹¹æœ": 14, "apple": 14, "apples": 14,
        "æ©™å­": 14, "orange": 14, "oranges": 14,
        "æŸ‘æ©˜": 14, "citrus": 14,
        "è‘¡è„": 7, "grape": 7, "grapes": 7,
        "è‰è“": 3, "strawberry": 3, "strawberries": 3,
        "æ¨±æ¡ƒ": 3, "cherry": 3, "cherries": 3,
        "æ¡ƒå­": 5, "peach": 5, "peaches": 5,
        "æ¢¨": 10, "pear": 10, "pears": 10,
        "æŸ æª¬": 21, "lemon": 21, "lemons": 21,
        "æ©˜å­": 10, "tangerine": 10, "mandarin": 10,
        "æå­": 5, "plum": 5, "plums": 5,
        "æå­": 3, "apricot": 3, "apricots": 3,
        "è“è“": 7, "blueberry": 7, "blueberries": 7,
        "é»‘è“": 3, "blackberry": 3, "blackberries": 3,
        "è¦†ç›†å­": 2, "raspberry": 2, "raspberries": 2,
        
        // é¦™è•‰ç‰¹æ®Šï¼ˆå¿«é€Ÿæˆç†Ÿï¼‰
        "é¦™è•‰": 3, "banana": 3, "bananas": 3,
        
        // ç»¿å¶è”¬èœï¼ˆçŸ­ä¿è´¨æœŸï¼‰
        "è èœ": 3, "spinach": 3,
        "ç”Ÿèœ": 5, "lettuce": 5,
        "éŸ­èœ": 3, "èŠ¹èœ": 7, "celery": 7,
        "å°ç™½èœ": 3, "bok choy": 5,
        "æ²¹èœ": 3, "é¦™èœ": 3, "cilantro": 3, "parsley": 5,
        "ç´«ç”˜è“": 7, "purple cabbage": 7,
        "å·å¿ƒèœ": 14, "cabbage": 14,
        "è¥¿å…°èŠ±": 5, "broccoli": 5,
        "èŠ±æ¤°èœ": 5, "cauliflower": 5,
        
        // æ ¹èŒç±»è”¬èœï¼ˆé•¿ä¿è´¨æœŸï¼‰
        "åœŸè±†": 14, "potato": 14, "potatoes": 14,
        "çº¢è–¯": 14, "sweet potato": 14, "sweet potatoes": 14,
        "èƒ¡èåœ": 21, "carrot": 21, "carrots": 21,
        "ç™½èåœ": 14, "radish": 7, "turnip": 10,
        "æ´‹è‘±": 30, "onion": 30, "onions": 30,
        "å¤§è’œ": 30, "garlic": 30,
        "ç”Ÿå§œ": 21, "ginger": 21,
        "è²è—•": 7, "lotus root": 7,
        "å±±è¯": 14, "yam": 14,
        
        // æ˜“è…è”¬èœ
        "è¥¿çº¢æŸ¿": 7, "tomato": 7, "tomatoes": 7,
        "é»„ç“œ": 7, "cucumber": 7,
        "èŒ„å­": 7, "eggplant": 7,
        "é’æ¤’": 7, "çº¢æ¤’": 7, "é»„æ¤’": 7, "pepper": 7, "peppers": 7,
        "è¾£æ¤’": 10, "chili": 10,
        "ç‰ç±³": 3, "corn": 3,
        "è±†è§’": 3, "green beans": 3,
        "è±Œè±†": 3, "peas": 3,
        "è˜‘è‡": 5, "mushroom": 5, "mushrooms": 5,
        
        // è‚‰ç±»ï¼ˆå†·è—ï¼‰
        "ç‰›è‚‰": 3, "beef": 3,
        "çŒªè‚‰": 3, "pork": 3,
        "é¸¡è‚‰": 2, "chicken": 2,
        "é¸­è‚‰": 2, "duck": 2,
        "ç¾Šè‚‰": 3, "lamb": 3,
        "é±¼è‚‰": 1, "fish": 1,
        "è™¾": 1, "shrimp": 1, "prawns": 1,
        "èƒèŸ¹": 1, "crab": 1,
        "è´ç±»": 1, "shellfish": 1,
        "é¦™è‚ ": 7, "sausage": 7,
        "ç«è…¿": 7, "ham": 7,
        "åŸ¹æ ¹": 7, "bacon": 7,
        
        // ä¹³åˆ¶å“ï¼ˆå†·è—ï¼‰
        "ç‰›å¥¶": 5, "milk": 5,
        "é…¸å¥¶": 7, "yogurt": 7,
        "å¥¶é…ª": 14, "cheese": 14,
        "èŠå£«": 14, "é»„æ²¹": 30, "butter": 30,
        "å¥¶æ²¹": 7, "cream": 7,
        "é…¸å¥¶æ²¹": 14, "sour cream": 14,
        
        // è›‹ç±»
        "é¸¡è›‹": 21, "egg": 21, "eggs": 21,
        "é¸­è›‹": 21, "duck egg": 21,
        "é¹Œé¹‘è›‹": 14, "quail egg": 14,
        
        // é¢åŒ…ç±»
        "é¢åŒ…": 3, "bread": 3,
        "åå¸": 3, "toast": 3,
        "é¦’å¤´": 2, "bun": 2,
        "åŒ…å­": 2, "steamed bun": 2,
        "é¥ºå­": 2, "dumpling": 2, "dumplings": 2,
        
        // è±†åˆ¶å“
        "è±†è…": 3, "tofu": 3,
        "è±†æµ†": 1, "soy milk": 1,
        "è…ç«¹": 180, "è±†çš®": 90,
        "è±†å¹²": 7, "dried tofu": 7,
        
        // è°ƒæ–™ç±»ï¼ˆè¾ƒé•¿ä¿è´¨æœŸï¼‰
        "é…±æ²¹": 365, "soy sauce": 365,
        "é†‹": 365, "vinegar": 365,
        "æ–™é…’": 365, "cooking wine": 365,
        "æ¤ç‰©æ²¹": 365, "oil": 365,
        "æ©„æ¦„æ²¹": 365, "olive oil": 365,
        "èŠéº»æ²¹": 365, "sesame oil": 365,
        "ç›": 1825, "sugar": 730, "salt": 1825, // 5å¹´, 2å¹´
        "èœ‚èœœ": 730, "honey": 730, // 2å¹´
        
        // åšæœç±»
        "èŠ±ç”Ÿ": 90, "peanut": 90, "peanuts": 90,
        "æ ¸æ¡ƒ": 90, "walnut": 90, "walnuts": 90,
        "æä»": 90, "almond": 90, "almonds": 90,
        "è…°æœ": 90, "cashew": 90, "cashews": 90,
        "å¼€å¿ƒæœ": 90, "pistachio": 90, "pistachios": 90,
        
        // èŒ¶å¶å’Œå’–å•¡
        "èŒ¶å¶": 365, "tea": 365,
        "å’–å•¡è±†": 180, "coffee": 180, "coffee beans": 180,
        "å’–å•¡ç²‰": 30, "ground coffee": 30
    ]
    
    // é»˜è®¤ä¿è´¨æœŸï¼ˆå¤©æ•°ï¼‰
    let defaultShelfLife: [FoodCategory: Int] = [
        .dairy: 7,        // ä¹³åˆ¶å“ 7å¤©
        .eggs: 21,        // è›‹ç±» 21å¤©
        .meat: 3,         // è‚‰ç±» 3å¤©
        .vegetables: 7,   // è”¬èœ 7å¤©
        .fruits: 5,       // æ°´æœ 5å¤©
        .grains: 365,     // è°·ç‰© 1å¹´
        .beverages: 180,  // é¥®æ–™ 6ä¸ªæœˆ
        .condiments: 365, // è°ƒæ–™ 1å¹´
        .frozen: 90,      // å†·å†» 3ä¸ªæœˆ
        .canned: 365,     // ç½å¤´ 1å¹´
        .snacks: 90,      // é›¶é£Ÿ 3ä¸ªæœˆ
        .other: 30        // å…¶ä»– 1ä¸ªæœˆ
    ]
    
    // åœç”¨è¯åˆ—è¡¨ (ä¸­è‹±æ–‡)  
    let stopWords: Set<String> = [
        // ä¸­æ–‡åœç”¨è¯
        "æˆ‘", "ä½ ", "ä»–", "å¥¹", "å®ƒ", "æˆ‘ä»¬", "ä½ ä»¬", "ä»–ä»¬",
        "çš„", "äº†", "ä¹°", "å–", "æœ‰", "æ˜¯", "å’Œ", "è·Ÿ",
        "ä»Šå¤©", "ä»Šæ—¥", "æ˜¨å¤©", "åˆšä¹°", "åˆšåˆš", "å¤©", "æ—¥", "æ—©", "æ™š", "å¤œ",
        // ä¸­æ–‡åŠ¨è¯å’Œè¡Œä¸ºè¯
        "åƒ", "åƒäº†", "å–", "å–äº†", "ç”¨", "ç”¨äº†", "åš", "åšäº†", "ç…®", "ç…®äº†",
        "ç‚’", "ç‚’äº†", "çƒ¤", "çƒ¤äº†", "è’¸", "è’¸äº†", "ç‚–", "ç‚–äº†", "åŠ ", "æ”¾",
        "æ‹¿", "å–", "å»", "æ¥", "å›", "èµ°", "çœ‹", "å¬", "è¯´", "æƒ³",
        // ä¸­æ–‡è¯­æ°”è¯å’Œåœé¡¿è¯
        "å—¯", "å•Š", "å‘ƒ", "é¢", "å‘¢", "å§", "å“", "å“¦", "è¯¶", "å”‰",
        "é‚£ä¸ª", "è¿™ä¸ª", "é‚£ä¹ˆ", "è¿™ä¹ˆ", "ç„¶å", "æ¥ç€", "è¿˜æœ‰",
        "å°±æ˜¯", "å°±", "ä¹Ÿ", "éƒ½", "è¿˜", "å†", "åˆ", "æ‰", "åˆš",
        // è‹±æ–‡åœç”¨è¯
        "i", "you", "he", "she", "it", "we", "they",
        "the", "a", "an", "and", "or", "but", "is", "are", "was", "were",
        "have", "has", "had", "buy", "bought", "get", "got", "some",
        "today", "yesterday", "just", "now",
        // è‹±æ–‡åŠ¨è¯å’Œè¡Œä¸ºè¯
        "eat", "ate", "eating", "drink", "drank", "drinking", "cook", "cooked", "cooking",
        "make", "made", "making", "use", "used", "using", "take", "took", "taking",
        "put", "add", "added", "adding", "go", "went", "come", "came", "see", "saw",
        // è‹±æ–‡è¯­æ°”è¯å’Œåœé¡¿è¯
        "um", "uh", "er", "ah", "oh", "well", "like", "you know", "so",
        "then", "also", "too", "actually", "basically", "literally",
        "hmm", "hm", "mm", "mmm", "yeah", "yes", "okay", "ok", "right"
        // æ³¨æ„: "of" è¢«ç§»é™¤ï¼Œå› ä¸ºå®ƒåœ¨"2 L of milk"ç­‰è¡¨è¾¾å¼ä¸­æ˜¯é‡è¦çš„
    ]
    
    // ç‰¹å®šé£Ÿç‰©çš„emojiæ˜ å°„ (ä¸­è‹±æ–‡)
    let specificEmojiMappings: [String: String] = [
        // æ°´æœ (ä¸­æ–‡)
        "è‹¹æœ": "ğŸ", "é¦™è•‰": "ğŸŒ", "æ©™å­": "ğŸŠ", "æŸ æª¬": "ğŸ‹", "è¥¿ç“œ": "ğŸ‰",
        "è‘¡è„": "ğŸ‡", "è‰è“": "ğŸ“", "æ¨±æ¡ƒ": "ğŸ’", "æ¡ƒå­": "ğŸ‘", "è è": "ğŸ",
        "å‡¤æ¢¨": "ğŸ", "èŠ’æœ": "ğŸ¥­", "çŒ•çŒ´æ¡ƒ": "ğŸ¥", "æ¤°å­": "ğŸ¥¥", "ç‰›æ²¹æœ": "ğŸ¥‘",
        "æ¢¨": "ğŸ", "ç«é¾™æœ": "ğŸ‰", "æ¦´è²": "ğŸŒ°", "è”æ": "ğŸ’",
        
        // æ°´æœ (è‹±æ–‡)
        "apple": "ğŸ", "apples": "ğŸ", "banana": "ğŸŒ", "bananas": "ğŸŒ",
        "orange": "ğŸŠ", "oranges": "ğŸŠ", "lemon": "ğŸ‹", "lemons": "ğŸ‹",
        "watermelon": "ğŸ‰", "grape": "ğŸ‡", "grapes": "ğŸ‡", "strawberry": "ğŸ“", "strawberries": "ğŸ“",
        "cherry": "ğŸ’", "cherries": "ğŸ’", "peach": "ğŸ‘", "peaches": "ğŸ‘",
        "pineapple": "ğŸ", "mango": "ğŸ¥­", "mangoes": "ğŸ¥­", "kiwi": "ğŸ¥",
        "coconut": "ğŸ¥¥", "avocado": "ğŸ¥‘", "avocados": "ğŸ¥‘", "pear": "ğŸ", "pears": "ğŸ",
        
        // è”¬èœ (ä¸­æ–‡)
        "ç•ªèŒ„": "ğŸ…", "è¥¿çº¢æŸ¿": "ğŸ…", "èŒ„å­": "ğŸ†", "ç‰ç±³": "ğŸŒ½", "èƒ¡èåœ": "ğŸ¥•",
        "è¾£æ¤’": "ğŸŒ¶ï¸", "çº¢æ¤’": "ğŸ«‘", "é’æ¤’": "ğŸ«‘", "é»„ç“œ": "ğŸ¥’", "è¥¿å…°èŠ±": "ğŸ¥¦",
        "è èœ": "ğŸ¥¬", "ç”Ÿèœ": "ğŸ¥¬", "æ´‹è‘±": "ğŸ§…", "å¤§è’œ": "ğŸ§„", "åœŸè±†": "ğŸ¥”",
        "çº¢è–¯": "ğŸ ", "å—ç“œ": "ğŸƒ", "è˜‘è‡": "ğŸ„", "èåœ": "ğŸ¥•",
        
        // è”¬èœ (è‹±æ–‡)
        "tomato": "ğŸ…", "tomatoes": "ğŸ…", "eggplant": "ğŸ†", "corn": "ğŸŒ½",
        "carrot": "ğŸ¥•", "carrots": "ğŸ¥•", "pepper": "ğŸŒ¶ï¸", "peppers": "ğŸŒ¶ï¸",
        "cucumber": "ğŸ¥’", "broccoli": "ğŸ¥¦", "spinach": "ğŸ¥¬", "lettuce": "ğŸ¥¬",
        "onion": "ğŸ§…", "onions": "ğŸ§…", "garlic": "ğŸ§„", "potato": "ğŸ¥”", "potatoes": "ğŸ¥”",
        "mushroom": "ğŸ„", "mushrooms": "ğŸ„",
        
        // è‚‰ç±» (ä¸­æ–‡)
        "ç‰›è‚‰": "ğŸ¥©", "çŒªè‚‰": "ğŸ¥“", "é¸¡è‚‰": "ğŸ—", "é¸­è‚‰": "ğŸ¦†", "ç¾Šè‚‰": "ğŸ¥©", "é±¼": "ğŸŸ",
        "è™¾": "ğŸ¦", "èŸ¹": "ğŸ¦€", "é¦™è‚ ": "ğŸŒ­", "ç«è…¿": "ğŸ¥“",
        
        // è‚‰ç±» (è‹±æ–‡)
        "beef": "ğŸ¥©", "pork": "ğŸ¥“", "chicken": "ğŸ—", "duck": "ğŸ¦†", "lamb": "ğŸ¥©", "fish": "ğŸŸ",
        "shrimp": "ğŸ¦", "crab": "ğŸ¦€", "sausage": "ğŸŒ­", "ham": "ğŸ¥“",
        "turkey": "ğŸ¦ƒ", "salmon": "ğŸŸ", "tuna": "ğŸŸ",
        
        // è›‹ç±» (ä¸­æ–‡)
        "é¸¡è›‹": "ğŸ¥š", "è›‹": "ğŸ¥š", "é¸­è›‹": "ğŸ¥š", "é¹Œé¹‘è›‹": "ğŸ¥š",
        
        // è›‹ç±» (è‹±æ–‡)  
        "egg": "ğŸ¥š", "eggs": "ğŸ¥š", "duck egg": "ğŸ¥š", "quail egg": "ğŸ¥š",
        
        // ä¹³åˆ¶å“ (ä¸­æ–‡)
        "ç‰›å¥¶": "ğŸ¥›", "é…¸å¥¶": "ğŸ¥›", "å¥¶é…ª": "ğŸ§€", "èŠå£«": "ğŸ§€", "é»„æ²¹": "ğŸ§ˆ",
        
        // ä¹³åˆ¶å“ (è‹±æ–‡)
        "milk": "ğŸ¥›", "yogurt": "ğŸ¥›", "cheese": "ğŸ§€", "butter": "ğŸ§ˆ", "cream": "ğŸ¥›",
        
        // è°·ç‰© (ä¸­æ–‡)
        "é¢åŒ…": "ğŸ", "ç±³é¥­": "ğŸš", "å¤§ç±³": "ğŸš", "é¢æ¡": "ğŸœ", "é¢ç²‰": "ğŸŒ¾", "éº¦ç‰‡": "ğŸ¥£", "ç‡•éº¦": "ğŸŒ¾",
        
        // è°·ç‰© (è‹±æ–‡)
        "bread": "ğŸ", "rice": "ğŸš", "noodles": "ğŸœ", "pasta": "ğŸ", "cereal": "ğŸ¥£", "flour": "ğŸŒ¾", "oats": "ğŸŒ¾", "wheat": "ğŸŒ¾",
        
        // é¥®æ–™ (ä¸­æ–‡)
        "å’–å•¡": "â˜•", "èŒ¶": "ğŸµ", "å•¤é…’": "ğŸº", "çº¢é…’": "ğŸ·", "é¦™æ§Ÿ": "ğŸ¾",
        "æœæ±": "ğŸ§ƒ", "æ±½æ°´": "ğŸ¥¤",
        
        // é¥®æ–™ (è‹±æ–‡)
        "coffee": "â˜•", "tea": "ğŸµ", "beer": "ğŸº", "wine": "ğŸ·", "juice": "ğŸ§ƒ", "soda": "ğŸ¥¤",
        
        // é›¶é£Ÿ (ä¸­æ–‡)
        "è–¯ç‰‡": "ğŸ¥”", "é¥¼å¹²": "ğŸª", "å·§å…‹åŠ›": "ğŸ«", "ç³–æœ": "ğŸ¬", "å†°æ·‡æ·‹": "ğŸ¦",
        "è›‹ç³•": "ğŸ°", "ç”œç”œåœˆ": "ğŸ©", "çˆ†ç±³èŠ±": "ğŸ¿",
        
        // é›¶é£Ÿ (è‹±æ–‡)
        "chips": "ğŸŸ", "cookies": "ğŸª", "chocolate": "ğŸ«", "candy": "ğŸ¬",
        "ice cream": "ğŸ¦", "cake": "ğŸ°", "popcorn": "ğŸ¿"
    ]
    
    // è·å–ç‰¹å®šé£Ÿç‰©çš„ä¿è´¨æœŸ
    func getShelfLife(for foodName: String, category: FoodCategory) -> Int {
        let lowercaseName = foodName.lowercased()
        
        // é¦–å…ˆæ£€æŸ¥ç‰¹å®šé£Ÿç‰©çš„ä¿è´¨æœŸ
        for (food, days) in specificFoodShelfLife {
            if lowercaseName.contains(food.lowercased()) {
                return days
            }
        }
        
        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç‰¹å®šçš„ï¼Œä½¿ç”¨åˆ†ç±»é»˜è®¤ä¿è´¨æœŸ
        return defaultShelfLife[category] ?? 30
    }
    
    // è·å–ç‰¹å®šé£Ÿç‰©çš„emoji
    func getSpecificEmoji(for foodName: String) -> String? {
        let lowercaseName = foodName.lowercased()
        
        for (food, emoji) in specificEmojiMappings {
            if lowercaseName.contains(food.lowercased()) {
                return emoji
            }
        }
        
        return nil
    }
    
    // æ£€æŸ¥æ˜¯å¦ä¸ºåœç”¨è¯
    func isStopWord(_ word: String) -> Bool {
        let stopWords: Set<String> = [
            // ä¸­æ–‡åœç”¨è¯
            "æˆ‘", "ä½ ", "ä»–", "å¥¹", "å®ƒ", "æˆ‘ä»¬", "ä½ ä»¬", "ä»–ä»¬",
            "çš„", "äº†", "ä¹°", "å–", "æœ‰", "æ˜¯", "å’Œ", "è·Ÿ",
            "ä»Šå¤©", "ä»Šæ—¥", "æ˜¨å¤©", "åˆšä¹°", "åˆšåˆš", "å¤©", "æ—¥", "æ—©", "æ™š", "å¤œ",
            // ä¸­æ–‡åŠ¨è¯å’Œè¡Œä¸ºè¯
            "åƒ", "åƒäº†", "å–", "å–äº†", "ç”¨", "ç”¨äº†", "åš", "åšäº†", "ç…®", "ç…®äº†",
            "ç‚’", "ç‚’äº†", "çƒ¤", "çƒ¤äº†", "è’¸", "è’¸äº†", "ç‚–", "ç‚–äº†", "åŠ ", "æ”¾",
            "æ‹¿", "å–", "å»", "æ¥", "å›", "èµ°", "çœ‹", "å¬", "è¯´", "æƒ³",
            // ä¸­æ–‡è¯­æ°”è¯å’Œåœé¡¿è¯
            "å—¯", "å•Š", "å‘ƒ", "é¢", "å‘¢", "å§", "å“", "å“¦", "è¯¶", "å”‰",
            "é‚£ä¸ª", "è¿™ä¸ª", "é‚£ä¹ˆ", "è¿™ä¹ˆ", "ç„¶å", "æ¥ç€", "è¿˜æœ‰",
            "å°±æ˜¯", "å°±", "ä¹Ÿ", "éƒ½", "è¿˜", "å†", "åˆ", "æ‰", "åˆš",
            // è‹±æ–‡åœç”¨è¯
            "i", "you", "he", "she", "it", "we", "they",
            "the", "a", "an", "and", "or", "but", "is", "are", "was", "were",
            "have", "has", "had", "buy", "bought", "get", "got", "some",
            "today", "yesterday", "just", "now",
            // è‹±æ–‡åŠ¨è¯å’Œè¡Œä¸ºè¯
            "eat", "ate", "eating", "drink", "drank", "drinking", "cook", "cooked", "cooking",
            "make", "made", "making", "use", "used", "using", "take", "took", "taking",
            "put", "add", "added", "adding", "go", "went", "come", "came", "see", "saw",
            // è‹±æ–‡è¯­æ°”è¯å’Œåœé¡¿è¯
            "um", "uh", "er", "ah", "oh", "well", "like", "you know", "so",
            "then", "also", "too", "actually", "basically", "literally",
            "hmm", "hm", "mm", "mmm", "yeah", "yes", "okay", "ok", "right"
        ]
        
        return stopWords.contains(word.lowercased())
    }
}